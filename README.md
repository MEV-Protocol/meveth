in progress: NATSPEC + optimizations + tests
